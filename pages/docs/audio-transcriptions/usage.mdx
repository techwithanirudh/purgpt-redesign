import { Tabs, Tab } from "../../../components/things-from-nextra-that-arent-importing-nicely/tabs.jsx";
import { Callout } from 'nextra/components'

# Using Audio Transcriptions

<Callout type="warning" emoji="⚠️">
    Audio transcriptions are coming soon. The following docs are not currently reliable!
</Callout>

The URL to send the POST request to is `https://purgpt.xyz/v1/audio/transcriptions`.

To use PurGPT transcriptions, there are certain required fields to include in the body of the request:

```json
{
    "file": "AN AUDIO FILE", // ex: https://audio-samples.github.io/samples/mp3/blizzard_unconditional/sample-0.mp3
} 
```

No `model` field is present, because OpenAI only supplies the `whisper-1` model for use. Given that, here is a table with more information on both required and optional parameters that can be passed into the body:

## API Reference

| Field            | Type      | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|------------------|-----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| file             | `file`    | **Required**. The audio file object (not file name lol) to transcribe, in one of these formats: `mp3`, `mp4`, `mpeg`, `mpga`, `m4a`, `wav`, or `webm`.                                                                                                                                                                                                                                                                                                                                                                              |
| prompt           | `string`  | Optional. An optional text to guide the model's style or continue a previous audio segment. The [prompt](https://platform.openai.com/docs/guides/speech-to-text/prompting) should match the audio language.                                                                                                                                                                                                                                                                                                                                                                           |
| response_format  | `string`  | Optional. Defaults to json. The format of the transcript output, in one of these options: `json`, `text`, `srt`, `verbose_json`, or `vtt`.                                                                                                                                                                                                                                                                                                                                                                                    |
| temperature      | `number`  | Optional. Defaults to 0. The sampling temperature, between 0 and 1. Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic. If set to 0, the model will use [log probability](https://en.wikipedia.org/wiki/Log_probability) to automatically increase the temperature until certain thresholds are hit.                                                                                                                                                                           |
| language         | `string`  | Optional. The language of the input audio. Supplying the input language in [ISO-639-1](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) format will improve accuracy and latency.                                                                                                                                                                                                                                                                                                                                                                                      |


## Code Example

<Tabs items={["JavaScript/Ajax", "Node.js", "Python", "C#", "cURL/BASH"]}>
  <Tab>
   ```js copy filename="index.js"
    const url = 'https://purgpt.xyz/v1/audio/transcriptions';

    const data = JSON.stringify({
        "file": "https://audio-samples.github.io/samples/mp3/blizzard_unconditional/sample-0.mp3",
    });

    const response = await fetch(url, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer YOUR API KEY',
        },
        body: data,
    });

    const text = await response.text();

    console.log(text);
    ```
  </Tab>
  <Tab>
   ```js copy filename="index.js"
    const http = require("https");

    const url = 'https://purgpt.xyz/v1/audio/transcriptions';

    const options = {
        method: 'POST',
        'Content-Type': 'application/json',
        'Authorization': 'Bearer YOUR API KEY',
    };

    const data = `{
       "file": "https://audio-samples.github.io/samples/mp3/blizzard_unconditional/sample-0.mp3",
    }`;

    let result = '';
    const req = http.request(url, options, (res) => {
        console.log(res.statusCode);

        res.setEncoding('utf8');
        res.on('data', (chunk) => {
            result += chunk;
        });

        res.on('end', () => {
            console.log(result);
        });
    });

    req.on('error', (e) => {
        console.error(e);
    });

    req.write(data);
    req.end();
    ```
    </Tab>
    <Tab>
   ```py copy filename="index.py"
    import requests
    from requests.structures import CaseInsensitiveDict

    url = "https://purgpt.xyz/v1/audio/transcriptions"

    headers = CaseInsensitiveDict()
    headers["Content-Type"] = "application/json"
    headers["Authorization"] = "Bearer YOUR API KEY"

    data = """
    {
      "file": "https://audio-samples.github.io/samples/mp3/blizzard_unconditional/sample-0.mp3",
    }
    """

    resp = requests.post(url, headers=headers, data=data)

    print(resp.status_code)
    ```
    </Tab>
    <Tab>
     ```cs copy filename="index.cs" 
    var url = "https://purgpt.xyz/v1/audio/transcriptions";

    var httpRequest = (HttpWebRequest)WebRequest.Create(url);
   
    httpRequest.Method = "POST";
    httpRequest.ContentType = "application/json";
    httpRequest.Headers["Authorization"] = "Bearer YOUR API KEY";

    var data = @"{
       ""file"": ""https://audio-samples.github.io/samples/mp3/blizzard_unconditional/sample-0.mp3"",
    }";

    using (var streamWriter = new StreamWriter(httpRequest.GetRequestStream()))
    {
         streamWriter.Write(data);
    }

    var httpResponse = (HttpWebResponse)httpRequest.GetResponse();
    using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
    {
         var result = streamReader.ReadToEnd();
    }

    Console.WriteLine(httpResponse.StatusCode);
    ```
    </Tab>
    <Tab>
    ```bash copy filename="Console"
   curl -X POST https://purgpt.xyz/v1/audio/transcriptions -H "Content-Type: application/json" -H "Authorization: Bearer YOUR API KEY" --data-binary @- <<DATA
    {
       "file": "https://audio-samples.github.io/samples/mp3/blizzard_unconditional/sample-0.mp3",
    }
    DATA
    ```
    </Tab>
</Tabs>